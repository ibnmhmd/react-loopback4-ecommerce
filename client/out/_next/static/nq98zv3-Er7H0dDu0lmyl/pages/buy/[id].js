(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{OgwN:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return D}));var s=t("q1tI"),l=t.n(s),r=t("NvAs"),n=t("MB5O"),c=t("o0o1"),i=t.n(c),o=t("HaE+"),d=t("nOHt"),u=t.n(d),m=t("Cj2W"),p=t("/RR4"),h=t("zM5D"),f=t("QojX"),b=t("cJN8"),y=t("AKbA"),v=t("1OyB"),N=t("vuIU"),k=function(){function e(){var a=this;Object(v.a)(this,e),this.address={},this.emiratesMap=new Map,this.emiratesMap.set("adh","Abu Dhabi"),this.emiratesMap.set("ain","Al Ain"),this.emiratesMap.set("dxb","Dubai"),this.emiratesMap.set("ajm","Ajman"),this.emiratesMap.set("shj","Sharjah"),this.emiratesMap.set("uml","Umm Al Khuyain"),this.emiratesMap.set("rak","Ras Al Khaimah"),this.address.fullName="",this.address.mobileNumber="",this.address.addressLine="",this.address.emirates="",this.address.addressType="",this.address.isDeliveryAddress=!1,this.address.id=0,this.address.getEmirate=function(e){return a.emiratesMap.get(e)}}return Object(N.a)(e,[{key:"setAddress",value:function(e){e.fullName&&(this.address.fullName=e.fullName),e.mobileNumber&&(this.address.mobileNumber=e.mobileNumber),e.addressLine&&(this.address.addressLine=e.addressLine),e.emirates&&(this.address.emirates=e.emirates),e.addressType&&(this.address.addressType=e.addressType),e.id&&(this.address.id=e.id)}},{key:"getAddress",value:function(){return this.address}},{key:"getEmirates",value:function(){}}]),e}(),_=function(){function e(){Object(v.a)(this,e),this.cardDetails={},this.cardDetails.nameOnCard="",this.cardDetails.cardNumber="",this.cardDetails.cvvNumber="",this.cardDetails.expiryMonth="",this.cardDetails.expiryYear="",this.cardDetails.id=0}return Object(N.a)(e,[{key:"setCardDetails",value:function(e){e.nameOnCard&&(this.cardDetails.nameOnCard=e.nameOnCard),e.cardNumber&&(this.cardDetails.mobileNumber=e.cardNumber),e.cvvNumber&&(this.cardDetails.cvvNumber=e.cvvNumber),e.expiryMonth&&(this.cardDetails.expiryMonth=e.expiryMonth),e.expiryYear&&(this.cardDetails.expiryYear=e.expiryYear),e.id&&(this.cardDetails.id=e.id)}},{key:"getCardDetails",value:function(){return this.cardDetails}}]),e}(),g=l.a.createElement,x=new k,O=new _,C=new y.a;var A=function(e){var a=Object(s.useContext)(n.a),t=a.cartSize,r=a.clearBasket,c=a.getCheckout,d=a.getBasketConfirmation,h=a.confirmBakset,f=Object(s.useState)([]),b=f[0],y=f[1],v=Object(s.useState)("Place Order"),N=v[0],k=v[1],_=Object(s.useState)(!1),x=_[0],O=_[1],A=Object(s.useState)(!1),j=A[0],E=A[1],D=Object(s.useState)(!1),M=D[0],T=D[1],I=Object(s.useState)(!1),P=I[0],L=I[1],B=Object(s.useState)([]),R=B[0],H=B[1],q=Object(s.useState)(!0),F=q[0],Y=(q[1],Object(s.useState)(0)),X=Y[0],V=Y[1],J=Object(s.useRef)();Object(s.useEffect)((function(){y(c());[{key:"deliveryAddressConfirmed",confirmed:!1},{key:"paymentConfirmed",confirmed:!1},{key:"summaryConfirmed",confirmed:!1}].map((function(e,a){h(e)}))}),[]);var K=function(){var e=Object(o.a)(i.a.mark((function e(){var a,t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!1,k("Validating Order ..."),E(!0),T(!1),O(!1),L(!1),C.disabledElem(J),e.next=9,U();case 9:t=e.sent,E(!1),t.errors.length>0?(T(!0),H(t.errors),L(!0),k("Order Failed")):(O(!0),k("Your order has been successfully placed."),V(z()),a=!0),setTimeout((function(){a||(T(!1),O(!1),k("Place Order"),C.enableElem(J))}),6e3);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(o.a)(i.a.mark((function e(){var a,t,s,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],t={},(s=d()).summaryConfirmed||(t.key="Basket Summary",t.error="Please confirm the Basket Summary.",a.push(t)),s.deliveryAddressConfirmed||((t={}).key="Delivery Address",t.error="Please add/set the Delivery Address.",a.push(t)),s.paymentConfirmed||((t={}).key="Payment Method",t.error="Please add/confirm the Payment Method.",a.push(t)),l=new Promise((function(e,t){setTimeout((function(){e({success:!0,errors:a})}),2e3)})),e.next=8,l;case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){return"I"+Math.random().toString(36).substr(2,9)};return g(l.a.Fragment,null,g("div",{className:"row"},g("div",{className:"col-xs-12"},g("h2",{className:"text-center"},"  CHECKOUT ( ",g("a",{className:"__checkout_items_count",onClick:function(){u.a.push("/cart/my-cart")}},t," ITEMS")," )  "),g("div",{className:"row"},x?g(w,{referenceNumber:X}):g(S,{checkoutItems:b}),g("div",{className:"col-xs-12 col-md-4 __checkout_btns"},g("p",null,"Please go through each and every step on the left side to finish checking out. You'll have a chance to review and edit your order before it's final."),F?g("a",{ref:J,className:"customButton __checkout_confirm_btn",onClick:function(){return K()}}," ",N,x?g(m.d,{label:"",paragraph:!1,class:"instock"}):null,j?g(m.c,{label:"",paragraph:!1}):null,M?g(m.a,{label:"",paragraph:!1,class:"outofstock"}):null):null,x?null:g(p.a,{buttonName:"CLEAR BASKET",Click:function(){r(),u.a.push("/")}}),g(p.a,{buttonName:"CONTINUE SHOPPING",Click:function(){u.a.push("/")}}),P?g("div",{className:"outofstock __checkout_erros"},R.map((function(e,a){return g("h5",{key:a},g("span",null,g("i",null,e.key)),": ",e.error)}))):null)))))};function S(e){var a=Object(s.useContext)(n.a),t=(a.cartSize,a.confirmBakset),l=(a.getBasketConfirmation,function(){me()}),r=[{label:"Name on Card",type:"text",placeholder:"Enter your name",controlId:"fullNameController",validate:!0,required:!0,class:"text-muted default",validationRules:{minLength:10},change:l,name:"nameOnCard",showLoader:!1},{label:"Card Number",type:"text",placeholder:"Enter the card number",controlId:"numberController",validate:!0,required:!0,class:"default",validationRules:{minLength:10,digitsValidator:""},change:l,name:"cardNumber",showLoader:!1},{label:"CVV Number",type:"text",placeholder:"Enter the CVV number",controlId:"cvvController",validate:!0,required:!0,class:"default",validationRules:{minLength:3,maxLength:3,digitsValidator:""},change:l,name:"cvvNumber",showLoader:!1},{label:"Expiry Month",type:"select",placeholder:"Enter your address",controlId:"monthController",validate:!1,required:!0,class:"default form-control",options:[{key:"01",label:"Jan"},{key:"02",label:"Feb"},{key:"03",label:"Mar"},{key:"04",label:"Apr"},{key:"05",label:"May"},{key:"06",label:"Jun"},{key:"07",label:"Jul"},{key:"08",label:"Aug"},{key:"09",label:"Sep"},{key:"10",label:"Oct"},{key:"11",label:"Nov"},{key:"12",label:"Dec"}],change:l,name:"expiryMonth"},{label:"Expiry Year",type:"select",placeholder:"Enter your address",controlId:"yearController",validate:!1,required:!0,class:"default form-control",change:l,name:"expiryYear",options:[{key:"2020",label:"2020"},{key:"2021",label:"2021"},{key:"2022",label:"2022"},{key:"2023",label:"2023"},{key:"2024",label:"2024"},{key:"2025",label:"2025"},{key:"2026",label:"2026"},{key:"2027",label:"2027"},{key:"2028",label:"2028"},{key:"2029",label:"2029"},{key:"2030",label:"2030"}]},{note:"All fields are mandatory .",type:"none",class:"text-muted __checkout_card_note outofstock"}],c=Object(s.useRef)(),d=Object(s.useState)(0),p=d[0],h=d[1],y=Object(s.useState)(0),v=y[0],N=y[1],_=Object(s.useState)(!1),A=(_[0],_[1]),S=Object(s.useState)("Confirm"),w=S[0],E=S[1],D=Object(s.useState)(!1),M=D[0],T=D[1],I=Object(s.useState)(!1),P=I[0],L=I[1],B=Object(s.useState)(!1),R=B[0],H=B[1],q=Object(s.useState)(!1),F=q[0],Y=(q[1],Object(s.useState)(!1)),X=Y[0],V=Y[1],J=Object(s.useState)([]),K=J[0],U=J[1],z=Object(s.useState)(!1),Q=z[0],G=z[1],W=Object(s.useState)({}),Z=(W[0],W[1]),$=Object(s.useState)("Confirm Card"),ee=$[0],ae=$[1],te=Object(s.useState)(!1),se=te[0],le=te[1],re=Object(s.useState)(!1),ne=re[0],ce=re[1],ie=Object(s.useState)({expiryMonth:"Jan",expiryYear:"2020"}),oe=ie[0],de=ie[1];Object(s.useEffect)((function(){var a=0;C.disabledElem(c),e.checkoutItems.map((function(e,t){a+=e.newPrice*e.selectedQty})),h(a),N(a+ue(a))}));var ue=function(e){return.05*e},me=function(){var e,a=JSON.parse(event.target.dataset.formdata);e=C.validate(event),console.log(e),C.processFieldPostValidation(e,a,oe,de),O.setCardDetails(oe),6==Object.keys(oe).length?C.enableElem(c):(le(!1),ae("Confirm Card"),C.disabledElem(c),t({key:"paymentConfirmed",confirmed:!1})),console.log(oe)},pe=function(){var e=Object(o.a)(i.a.mark((function e(){var a,t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Saving new address, please wait ... "),a=K,t=new Promise((function(e,t){setTimeout((function(){e({message:"Address has been successfully saved .",success:!0}),V(!0),a.push(x.getAddress()),U(a)}),3e3)})),e.next=5,t;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return g("div",{className:"col-xs-12 col-md-8"},g("div",{className:"panel-group",id:"accordion"},g("div",{className:"panel panel-default"},g("div",{className:"panel-heading"},g("h4",{className:"panel-title"},g("i",{className:"fas fa-shopping-basket __checkout_icons"})," ",g("a",{className:"accordion-toggle","data-toggle":"collapse","data-parent":"#accordion",href:"#basketSummary"},"BASKET SUMMARY"))),g("div",{id:"basketSummary",className:"panel-collapse collapse in"},g("div",{className:"panel-body"},g("div",{className:"col-xs-6"},g("p",null,"Items :")),g("div",{className:"col-xs-6"},g("p",null,"AED ",p," ")),g("div",{className:"col-xs-6"},g("p",null,"Shipping & Handling : ")),g("div",{className:"col-xs-6"},g("p",null,"AED 0.00")),g("div",{className:"col-xs-6"},g("p",null,"Order total :")),g("div",{className:"col-xs-6"}," ",g("p",null,"AED ",v," ")),g("div",{className:"col-xs-6"}," ",g("p",null,"Confirm your basket ? ")),g("div",{className:"col-xs-6"}," ",g("a",{className:"customButton __checkout_confirm_btn",onClick:function(){return L(!0),T(!1),E("Confirming .."),void setTimeout((function(){L(!1),T(!0),t({key:"summaryConfirmed",confirmed:!0}),E("Confirmed")}),2e3)}},w,M?g(m.d,{label:"",paragraph:!1,class:"instock"}):null,P?g(m.c,{label:"",paragraph:!1}):null))))),g("div",{className:"panel panel-default"},g("div",{className:"panel-heading"},g("h4",{className:"panel-title"},g("i",{className:"fas fa-address-card __checkout_icons"})," ",g("a",{className:"accordion-toggle","data-toggle":"collapse","data-parent":"#accordion",href:"#shippingAddress"},"SHIPPING ADDRESS"))),g("div",{id:"shippingAddress",className:"panel-collapse collapse"},g("div",{className:"panel-body"},g("div",{className:"col-xs-12"},g("a",{className:"__checkout_add_new_addr",onClick:function(){return x=new k,void H(!0)}}," ",g("i",{className:"fas fa-plus-circle"})," Add a new address ")),g("div",{className:"col-xs-12"},g("p",{className:"__checkout_address_label"}," Exisiting Address ( ",F?null:"Not available"," ) ")),X?K.map((function(e,a){return g("div",{className:"col-xs-12 __checkout_new_address_wrapper",key:a},g("p",{className:"__checkout_address_label"}," New Address ( # ",a+1,")"),g("div",{className:"col-xs-6"},g("p",null,"Full Name : ")),g("div",{className:"col-xs-6"},g("p",null,e.fullName)),g("div",{className:"col-xs-6"},g("p",null,"Phone Number : ")),g("div",{className:"col-xs-6"},g("p",null,e.mobileNumber)),g("div",{className:"col-xs-6"},g("p",null,"Address Line : ")),g("div",{className:"col-xs-6"},g("p",null,e.addressLine)),g("div",{className:"col-xs-6"},g("p",null,"Emirate : ")),g("div",{className:"col-xs-6"},g("p",null,e.getEmirate(e.emirates))),g("div",{className:"col-xs-6"},g("p",null,"Address Type : ")),g("div",{className:"col-xs-6"},g("p",null,e.addressType)),g("div",{className:"col-xs-6"},g("label",{style:{marginRight:6},htmlFor:"deliveryAddress"},"Set as delivery address"),g("input",{checked:e.isDeliveryAddress,type:"checkbox",onChange:function(a){return function(e,a){console.log(a),console.log(e.target.checked),a.isDeliveryAddress=e.target.checked,A(e.target.checked),Z(a),t({key:"deliveryAddressConfirmed",confirmed:e.target.checked}),K.map((function(t,s){t.isDeliveryAddress=!1,t.id==a.id&&e.target.checked&&(t.isDeliveryAddress=!0)}))}(a,e)},value:"mainAddress",id:"deliveryAddress"})),g("div",{className:"col-xs-6"},g("i",{className:"fas fa-trash-alt"}),g("a",{onClick:function(){return function(e){G(!0),setTimeout((function(){var a=K.filter((function(a){return a.id!==e.id}));e.isDeliveryAddress&&(A(!1),t({key:"deliveryAddressConfirmed",confirmed:!1})),U(a),G(!1)}),2e3)}(e)},className:"__cart_actions"},"Remove")," ",Q?g(m.c,{label:"",paragraph:!1}):null))})):null))),g("div",{className:"panel panel-default"},g("div",{className:"panel-heading"},g("h4",{className:"panel-title"},g("i",{className:"fas fa-money-check-alt __checkout_icons"})," ",g("a",{className:"accordion-toggle","data-toggle":"collapse","data-parent":"#accordion",href:"#paymentMethod"},"PAYMENT METHOD"))),g("div",{id:"paymentMethod",className:"panel-collapse collapse"},g("div",{className:"panel-body"},g(f.a,null,r.map((function(e,a){return g("div",{className:"col-xs-6 col-md-4",key:a},g(b.a,{props:e}))}))),g("div",{className:"col-xs-6 col-md-4"},g("a",{className:"customButton __checkout_confirm_btn",onClick:function(){return ce(!0),le(!1),ae("Confirming .."),void setTimeout((function(){ce(!1),le(!0),t({key:"paymentConfirmed",confirmed:!0}),ae("Details Confirmed")}),2e3)},ref:c},ee,se?g(m.d,{label:"",paragraph:!1,class:"instock"}):null,ne?g(m.c,{label:"",paragraph:!1}):null))))),g("div",{className:"panel panel-default"},g("div",{className:"panel-heading"},g("h4",{className:"panel-title"},g("i",{className:"fas fa-truck __checkout_icons"})," ",g("a",{className:"accordion-toggle","data-toggle":"collapse","data-parent":"#accordion",href:"#itemsShipping"},"SHIPPING & ITEMS"))),g("div",{id:"itemsShipping",className:"panel-collapse collapse"},g("div",{className:"panel-body"},g("div",{className:"col-xs-12"},g("p",{className:"__checkout_delivery_note"},"Delivery date : 05/05/2020 ")),g("div",{className:"col-xs-12 __checkout_items_final"},g("p",null,"Items"),e.checkoutItems.map((function(e,a){return g("div",{className:"__checkout_items row",key:a},g("div",{className:"col-xs-2 __checkout_bold"},"Name : "),g("div",{className:"col-xs-2"}," ",e.name," "),g("div",{className:"col-xs-2 __checkout_bold"},"Price : "),g("div",{className:"col-xs-2"}," AED ",e.newPrice," "),g("div",{className:"col-xs-2 __checkout_bold"},"Quantity : "),g("div",{className:"col-xs-2"},e.selectedQty))})),g("div",{className:"col-xs-12"},g("a",{className:"__checkout_edit_basket",onClick:function(){setTimeout((function(){u.a.push("/cart/my-cart")}),1e3)}},g("i",{className:"fas fa-edit"})," Edit basket"))))))),R?g(j,{show:R,handleClose:function(){H(!1)},saveNewAddress:pe}):null)}function j(e){var a=Object(s.useState)(!1),t=a[0],r=a[1],n=Object(s.useState)(!1),c=n[0],d=n[1],u=Object(s.useState)(!1),p=u[0],y=u[1],v=Object(s.useState)("Save Address"),N=v[0],k=v[1],_=Object(s.useState)({emirates:"adh",addressType:"Home"}),O=_[0],A=_[1],S=Object(s.useRef)();Object(s.useEffect)((function(){C.disabledElem(S)}));var j=function(){var e,a=JSON.parse(event.target.dataset.formdata);e=C.validate(event),console.log(e),C.processFieldPostValidation(e,a,O,A),x.setAddress(O),6==Object.keys(O).length?C.enableElem(S):C.disabledElem(S)},w=[{label:"Full Name",type:"text",placeholder:"Enter your name",controlId:"fullNameController",validate:!0,required:!0,class:"text-muted default",validationRules:{minLength:10},change:j,name:"fullName",showLoader:!1},{label:"Mobile Number",type:"text",placeholder:"Enter your mobile number e.g : 05XXXXXXXX",controlId:"numberController",validate:!0,required:!0,class:"default",validationRules:{minLength:10,digitsValidator:""},change:j,name:"mobileNumber",showLoader:!1},{label:"Street name / no., Building name / no., Floor no, apartment or villa no",type:"text",placeholder:"Enter your address",controlId:"address1Controller",validate:!0,required:!0,class:"default",validationRules:{minLength:10},change:j,name:"addressLine",showLoader:!1},{label:"Emirates",type:"select",placeholder:"Enter your address",controlId:"emiratesController",validate:!1,required:!0,class:"default form-control",options:[{key:"adh",label:"Abu Dhabi"},{key:"ain",label:"Al Ain"},{key:"ajm",label:"Ajman"},{key:"dxb",label:"Dubai"},{key:"shj",label:"Sharjah"},{key:"uml",label:"Umm Al Khuyain"},{key:"rak",label:"Ras Al Khaimah"}],change:j,name:"emirates"},{label:"Address Type",type:"select",placeholder:"Enter your address",controlId:"addressTypeController",validate:!1,required:!0,class:"default form-control",change:j,name:"addressType",options:[{key:"Home",label:"Home"},{key:"Office",label:"Office"}]}],E=function(){var a=Object(o.a)(i.a.mark((function a(){var t;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r(!0),y(!1),d(!1),k("Saving ..."),C.enableElem(S),a.next=7,e.saveNewAddress();case 7:t=a.sent,r(!1),y(!1),k(t.message),t.success?(d(!0),C.disabledElem(S)):(y(!0),C.enableElem(S));case 12:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return g(l.a.Fragment,null,g(h.a,{show:e.show,onHide:e.handleClose},g(h.a.Header,null,g(h.a.Title,{className:"text-center font-weight-bold text-uppercase"},"ADD A NEW ADDRESS")),g(h.a.Body,{className:"font-weight-bold "},g("span",{style:{color:"red",fontSize:13}},"All below fields are mandatory, save button is disabled unless all fields are provided ."),g(f.a,null,w.map((function(e,a){return g(b.a,{key:a,props:e})})))),g(h.a.Footer,null,g("a",{ref:S,className:"customButton __checkout_confirm_btn __checkout_save_new_add",onClick:function(){return E()}}," ",N,c?g(m.d,{label:"",paragraph:!1,class:"instock"}):null,t?g(m.c,{label:"",paragraph:!1}):null,p?g(m.a,{label:"",paragraph:!1,class:"outofstock"}):null),g("a",{className:"customButton __checkout_confirm_btn __checkout_save_new_add",onClick:e.handleClose}," Close"))))}function w(e){return g(l.a.Fragment,null,g("div",{className:"col-xs-12 col-md-8 __cart_item_card_wrapper __cart_empty_basket instock"},g("h2",{className:"__checkout_congrats"},"Congratulations, your order is received :) "),g("h4",null,"Thank you for shopping with us, we hope you had a smooth and soft shopping, get back soon ."),g("br",null),g("h4",{style:{textDecoration:"underline"}},"You order reference number is : ",g("i",null,e.referenceNumber))))}var E=l.a.createElement;function D(){return Object(s.useEffect)((function(){console.log("cart size :: ")})),E(r.a,{title:"Checkout items",description:"Checkout page for iBoutique"},E("div",{className:"container __registeration"},E(A,null)))}},fIML:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/buy/[id]",function(){return t("OgwN")}])}},[["fIML",0,2,1,3,4,5]]]);