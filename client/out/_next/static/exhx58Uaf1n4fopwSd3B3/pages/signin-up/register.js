(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"/RR4":function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),s=r.a.createElement;t.a=function(e){return s(r.a.Fragment,null,s("a",{className:"customButton",onClick:""!==e.Click?function(){e.callBackParam?e.Click(e.callBackParam):e.Click()}:null},s("i",{className:"".concat(e.fontName," __quick_item_font_awsome")}),e.buttonName))}},Cj2W:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return c})),a.d(t,"a",(function(){return u}));var n=a("q1tI"),r=a.n(n),s=a("/RR4"),o=r.a.createElement,i=function(e){return o(r.a.Fragment,null,o("div",{className:"row",style:{margin:"2rem 0"}},o("div",{className:"col-xs-12 col-md-4"}),o("div",{className:"col-xs-12 col-md-4"},o(s.a,{buttonName:"LOAD MORE ITEMS..",Click:e.LoadMore?e.LoadMore:""})),o("div",{className:"col-xs-12 col-md-4"})))},l=function(e){return e.paragraph?o("p",{className:"__cart_qty_loader"},e.label," ",o("i",{className:"fas fa-sync fa-spin"})):o("i",{className:"fas fa-sync fa-spin"})},c=function(e){return e.paragraph?o("p",{className:"__cart_qty_loader instock"},e.label," ",o("i",{className:"fas fa-check-circle"})):o("i",{className:"".concat(e.class?e.class:""," fas fa-check-circle")})},u=function(e){return e.paragraph?o("p",{className:"__cart_qty_loader outofstock"},e.label," ",o("i",{className:"fas fa-times-circle"})):o("i",{className:"".concat(e.class?e.class:""," fas fa-times-circle")})}},"IA+c":function(e,t,a){"use strict";a.r(t),function(e){a.d(t,"default",(function(){return v}));var n=a("1OyB"),r=a("vuIU"),s=a("JX7q"),o=a("Ji7U"),i=a("md7G"),l=a("foSv"),c=a("q1tI"),u=a.n(c),d=a("NvAs"),m=a("bmR9"),f=a("gc4K"),h=a("Bqj+"),g=(a("vDqi"),u.a.createElement);function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(i.a)(this,a)}}a("6WWA");var v=function(t){Object(o.a)(i,t);var a=p(i);function i(t){var r;return Object(n.a)(this,i),(r=a.call(this,t)).signIn=r.signIn.bind(Object(s.a)(r)),r.signUp=r.signUp.bind(Object(s.a)(r)),r.state={url:e.env.url,title:"Create an iShop account",subTitle:"Already have an account ?",signUp:!0},r}return Object(r.a)(i,[{key:"signUp",value:function(){this.setState({title:"Create an iShop account",subTitle:"Already have an account ?",signUp:!this.state.signUp})}},{key:"signIn",value:function(){console.log(e.env.REACT_APP_API_ROOT),this.setState({title:"Sign-in to your ishop account",subTitle:"Don't have an account yet ?",signUp:!this.state.signUp})}},{key:"render",value:function(){var e=this;return g(d.a,{title:"iShop Registeration/Login",description:"iShop Registeration/Login"},g(h.b,null,g("div",{className:"container __registeration"},g("div",{className:"row"},g("div",{className:"col-xs-12"},g("h2",{className:"text-center __registeration __registeration_header"}," ",this.state.title,"  "),g("h4",{className:"text-center __registeration __registeration_sign_in"}," ",this.state.subTitle,"  ",this.state.signUp?g("a",{onClick:function(){return e.signIn()}}," Sign In "):g("a",{onClick:function(){return e.signUp()}}," Sign Up ")," "),this.state.signUp?g(m.a,null):g(f.a,null))))))}}]),i}(u.a.Component)}.call(this,a("8oxB"))},KQm4:function(e,t,a){"use strict";function n(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.d(t,"a",(function(){return n}))},bmR9:function(e,t,a){"use strict";a.d(t,"a",(function(){return N}));var n=a("KQm4"),r=a("o0o1"),s=a.n(r),o=a("HaE+"),i=a("1OyB"),l=a("vuIU"),c=a("JX7q"),u=a("Ji7U"),d=a("md7G"),m=a("foSv"),f=a("rePB"),h=a("q1tI"),g=a.n(h),p=a("QojX"),v=a("cJN8"),b=a("AKbA"),y=a("Bqj+"),w=a("nOHt"),S=a.n(w),I=a("Cj2W"),E=g.a.createElement;function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(m.a)(e);if(t){var r=Object(m.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(d.a)(this,a)}}var _=a("vDqi"),L=a("6WWA"),O=new b.a,N=function(e){Object(u.a)(a,e);var t=k(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).submitRef=g.a.createRef(),n.handleSubmit=n.handleSubmit.bind(Object(c.a)(n)),n.onChange=n.onChange.bind(Object(c.a)(n)),n.handleSubmitState=n.handleSubmitState.bind(Object(c.a)(n)),n.checkEmailAvailability=n.checkEmailAvailability.bind(Object(c.a)(n)),n.handleShow=n.handleShow.bind(Object(c.a)(n)),n.removeInvalidElement=n.removeInvalidElement.bind(Object(c.a)(n)),n.handleClose=n.handleClose.bind(Object(c.a)(n)),n.comparePasswords=n.comparePasswords.bind(Object(c.a)(n)),n.state={disableSubmit:!0,formFields:[],showEmailLoader:!1,showError:!1,errorMessage:"",submitLabel:"Register",registered:!1,registering:!1,failed:!1},n.modalProps={onHide:n.onHide,message:"This email is already reserved .",header:"Validation Error"},n.formData=[{label:"First Name",type:"text",placeholder:"Enter your firstname",controlId:"firstNameController",validate:!0,required:!0,validationRules:{minLength:6,maxLength:12},class:"default",change:n.onChange,name:"firstName",showLoader:!1},{label:"Last Name",type:"text",placeholder:"Enter your lastname",controlId:"lastNameController",validate:!0,required:!0,class:"default",validationRules:{minLength:6,maxLength:12},change:n.onChange,name:"lastName",showLoader:!1},{label:"Email Address",type:"email",placeholder:"Enter your emil address",controlId:"emailController",note:"We'll never share your email with anyone else.",validate:!0,required:!0,class:"text-muted default",validationRules:{emailValidator:""},change:n.onChange,name:"email",showLoader:!1},{label:"Password",type:"password",placeholder:"Enter your password",controlId:"passwordController",validate:!0,required:!0,class:"default",validationRules:{minLength:8,passwordValidator:""},change:n.onChange,note:"Your password should be at least 8 characters long alphanumeric .",name:"password",showLoader:!1},{label:"Confirm Password",type:"password",placeholder:"Enter your password",controlId:"confirmPasswordController",validate:!0,required:!0,class:"default",validationRules:{minLength:8,passwordValidator:"",dependents:["passwordController"]},change:n.onChange,note:"This field should match the above one .",name:"cPassword",showLoader:!1},{note:"By creating an account, you agree to our Conditions of Use and Privacy Notice.",type:"none",class:"text-muted"}],n}return Object(l.a)(a,[{key:"handleShow",value:function(){this.setState({showError:!0})}},{key:"handleClose",value:function(){this.setState({showError:!1})}},{key:"handleSubmit",value:function(){event.preventDefault();var e=this.comparePasswords(),t=this;if(e){this.setState({submitLabel:"Please wait ..",registering:!0,showError:!1,errorMessage:"",failed:!1}),this.handleSubmitState(!0);var a={};this.state.formFields.map((function(e,t){a[e.name]=e[e.name]?e[e.name]:e.value})),delete a.cPassword,_.post(L.REGISTER,a).then((function(e){t.handleSubmitState(!0),t.setState({submitLabel:"Account has been created.",registering:!1,registered:!0}),localStorage.setItem("iShopUserId",e.data._id),setTimeout((function(){S.a.push("/")}),2e3)})).catch((function(e){console.error("Error :: "+e);var a="";a=e&&e.response&&422==e.response.status?"Error : ".concat(e.response.data.error.message):"Error : ".concat(e),t.setState({submitLabel:"Register",registering:!1,showError:!0,errorMessage:a,failed:!0}),t.handleSubmitState(!1)}))}}},{key:"handleSubmitState",value:function(e){e?O.disabledElem(this.submitRef):O.enableElem(this.submitRef)}},{key:"comparePasswords",value:function(){var e=!0,t=this.state.formFields.find((function(e){return"password"==e.name})),a=this.state.formFields.find((function(e){return"cPassword"==e.name}));return void 0!==t&&void 0!==a&&t.value!==a.value&&(this.setState({showError:!0,errorMessage:"Sorry, your passwords are not matching !",registering:!1}),a.ref.classList.remove("valid"),a.ref.classList.add("in-valid"),this.removeInvalidElement(a),e=!1,O.disabledElem(this.submitRef)),e}},{key:"checkEmailAvailability",value:function(){var e=Object(o.a)(s.a.mark((function e(t,a){var n=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({showEmailLoader:!0}),e.next=3,new Promise((function(e){setTimeout((function(){var r=t[0][0],s=r.value,o=r.ref;n.state.formFields.find((function(e){return"email"==e.name}));"amine.admin@mail.com"!==s&&(n.setState({showError:!0,errorMessage:"The email ** ".concat(s," ** is already registered in our database, please use a different one or reset your password .")}),o.classList.remove("valid"),o.classList.add("in-valid"),t=[],n.removeInvalidElement(a)),e()}),1e3)}));case 3:return e.next=5,new Promise((function(e){setTimeout((function(){n.setState({showEmailLoader:!1}),e()}),3e3)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"onChange",value:function(){var e=this,t=[],a=this,n=JSON.parse(event.target.dataset.formdata);0==(t=O.validate(event))[0].length?this.removeInvalidElement(n):t[0].map((function(t,n){void 0==a.state.formFields.find((function(e){return e.name==t.name}))?e.setFields(t):e.updateFields(t)}))}},{key:"removeInvalidElement",value:function(e){var t=this;this.setState({formFields:this.state.formFields.filter((function(t){return t.name!==e.name}))},(function(){t.handleSubmitState(!(5==t.state.formFields.length))}))}},{key:"componentDidMount",value:function(){O.disabledElem(this.submitRef)}},{key:"setFields",value:function(e){var t=this;this.setState({formFields:[].concat(Object(n.a)(this.state.formFields),[e])},(function(){t.handleSubmitState(!(5==t.state.formFields.length))}))}},{key:"updateFields",value:function(e){var t=this.state.formFields;t.map((function(t,a){return t[e.name]=e.value})),this.setState({formFields:t})}},{key:"render",value:function(){var e=this;return E("div",{className:"container __registeration_form"},E("div",{className:"row"},E("div",{className:"col-xs-12"},E("div",{className:"__registration_form_wrapper"},E(p.a,null,this.formData.map((function(t,a){return"email"==t.name&&(t.showLoader=e.state.showEmailLoader),E(v.a,{key:a,props:t})})),E(p.a.Group,{controlId:"formBasicPassword",className:"col-xs-5",style:{paddingLeft:0}},E("a",{ref:this.submitRef,className:"customButton __checkout_confirm_btn",onClick:this.handleSubmit},this.state.submitLabel,this.state.registered?E(I.d,{label:"",paragraph:!1,class:"instock"}):null,this.state.registering?E(I.c,{label:"",paragraph:!1}):null,this.state.failed?E(I.a,{label:"",paragraph:!1,class:"outofstock"}):null)),this.state.showError?E(p.a.Group,{controlId:"formBasicPassword",className:"col-xs-7 reg-error"},this.state.errorMessage):null)))))}}]),a}(g.a.PureComponent);Object(f.a)(N,"contextType",y.a)},gc4K:function(e,t,a){"use strict";a.d(t,"a",(function(){return j}));var n=a("o0o1"),r=a.n(n),s=a("HaE+"),o=a("KQm4"),i=a("1OyB"),l=a("vuIU"),c=a("JX7q"),u=a("Ji7U"),d=a("md7G"),m=a("foSv"),f=a("rePB"),h=a("q1tI"),g=a.n(h),p=a("QojX"),v=a("cJN8"),b=a("AKbA"),y=a("MhS6"),w=a("Bqj+"),S=a("Cj2W"),I=a("nOHt"),E=a.n(I),k=g.a.createElement;function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(m.a)(e);if(t){var r=Object(m.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(d.a)(this,a)}}var L=new b.a,O=a("6WWA"),N=new y.a,j=function(e){Object(u.a)(a,e);var t=_(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).logInRef=g.a.createRef(),n.onChange=n.onChange.bind(Object(c.a)(n)),n.handleSubmitState=n.handleSubmitState.bind(Object(c.a)(n)),n.removeInvalidElement=n.removeInvalidElement.bind(Object(c.a)(n)),n.login=n.login.bind(Object(c.a)(n)),n.state={disableSubmit:!0,formFields:[],showEmailLoader:!1,showError:!1,errorMessage:"",logingIn:!1,loggedIn:!1,failed:!1,signInLabel:"Login"},n.formData=[{label:"Email Address",type:"email",placeholder:"Enter your emil address",controlId:"emailController",validate:!0,required:!0,class:"text-muted default",validationRules:{emailValidator:""},change:n.onChange,name:"email",showLoader:!1},{label:"Password",type:"password",placeholder:"Enter your password",controlId:"passwordController",validate:!0,required:!0,class:"default",validationRules:{minLength:8,passwordValidator:""},change:n.onChange,name:"password",showLoader:!1}],n}return Object(l.a)(a,[{key:"handleSubmitState",value:function(e){e?L.disabledElem(this.logInRef):L.enableElem(this.logInRef)}},{key:"onChange",value:function(){var e=this,t=[],a=this,n=JSON.parse(event.target.dataset.formdata);t=L.validate(event),console.log(t[0]),0==t[0].length?this.removeInvalidElement(n):t[0].map((function(t,n){void 0==a.state.formFields.find((function(e){return e.name==t.name}))?e.setFields(t):e.updateFields(t)}))}},{key:"removeInvalidElement",value:function(e){var t=this;this.setState({formFields:this.state.formFields.filter((function(t){return t.name!==e.name}))},(function(){t.handleSubmitState(!(2==t.state.formFields.length))}))}},{key:"setFields",value:function(e){var t=this;this.setState({formFields:[].concat(Object(o.a)(this.state.formFields),[e])},(function(){t.handleSubmitState(!(2==t.state.formFields.length))}))}},{key:"updateFields",value:function(e){var t=this.state.formFields;t.map((function(t,a){return t[e.name]=e.value})),this.setState({formFields:t})}},{key:"login",value:function(){var e=Object(s.a)(r.a.mark((function e(){var t,a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},a=this,n="",this.state.formFields.map((function(e,a){t[e.name]=e[e.name]?e[e.name]:e.value})),this.setState({logingIn:!0,failed:!1,signInLabel:"Logging in ..",showError:!1,errorMessage:""}),a.handleSubmitState(!0),e.next=6,N.post({url:O.LOGIN,requestBody:t,headers:{"Content-Type":"application/json"}}).then(function(){var e=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.response.success){e.next=8;break}return a.handleSubmitState(!0),a.setState({signInLabel:"Successfully LoggedIn.",logingIn:!1,loggedIn:!0}),localStorage.setItem("iShopUserToken",t.data.response.token),e.next=6,a.getProfile(t.data.response.token);case 6:e.next=12;break;case 8:n=t.data.response.message,a.handleSubmitState(!1),localStorage.removeItem("iShopUserToken"),a.setState({signInLabel:"Login",logingIn:!1,loggedIn:!1,showError:!0,errorMessage:n,failed:!0});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e&&e.response&&422==e.response.status&&(n="Error : ".concat(e.response.data.error.message)),console.error(e),a.setState({signInLabel:"Login",loggedIn:!1,logingIn:!1,showError:!0,errorMessage:n,failed:!0}),a.handleSubmitState(!1)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getProfile",value:function(){var e=Object(s.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this,n={headers:{Authorization:"Bearer "+t}},e.next=4,N.get({url:O.GET_PROFILE,headers:n}).then((function(e){a.saveCustomerProfileLocally(e.data),E.a.push("/")})).catch((function(e){if(401==e.response.status){e.response.data.error.message;a.setState({signInLabel:"Login",loggedIn:!1,logingIn:!1,showError:!0,errorMessage:"Error getting user profile, please try again .",failed:!0}),a.handleSubmitState(!1)}}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveCustomerProfileLocally",value:function(e){e.status="loggedIn",localStorage.setItem("customerProfile",JSON.stringify(e))}},{key:"render",value:function(){var e=this;return k("div",{className:"container __registeration_form"},k("div",{className:"row"},k("div",{className:"col-xs-12"},k("div",{className:"__registration_form_wrapper"},k(p.a,null,this.formData.map((function(e,t){return k(v.a,{key:t,props:e})})),k(p.a.Group,{controlId:"formBasicPassword",className:"col-xs-5",style:{paddingLeft:0}},k("a",{ref:this.logInRef,className:"customButton __checkout_confirm_btn",onClick:function(){return e.login()}},this.state.signInLabel,this.state.loggedIn?k(S.d,{label:"",paragraph:!1,class:"instock"}):null,this.state.logingIn?k(S.c,{label:"",paragraph:!1}):null,this.state.failed?k(S.a,{label:"",paragraph:!1,class:"outofstock"}):null)),this.state.showError?k(p.a.Group,{controlId:"formBasicPassword",className:"col-xs-7 reg-error"},this.state.errorMessage):null)))))}}]),a}(g.a.PureComponent);Object(f.a)(j,"contextType",w.a)},rhL0:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signin-up/register",function(){return a("IA+c")}])}},[["rhL0",0,2,1,3,6]]]);